function strRepeat(e,t){for(var n=0;n<t-1;++n)e+=e;return e}function toDigits(e,t){"undefined"==typeof t&&(t=2);var n=Math.pow(10,t-1);return e<n?strRepeat("0",t-1)+e:e}function urlParam(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:decodeURIComponent(t[1])||0}function isUnset(e){return void 0==e||"undefined"==typeof e||null==e}function isSet(e){return!isUnset(e)}function isString(e){return"string"==typeof e}function isObject(e,t){return t=isUnset(t)?"[object]":"[object "+t+"]",isSet(e)&&Object.prototype.toString.call(e)===t}function isArray(e){return isObject(e,"Array")}function beginsWith(e,t){return!!isSet(e)&&0==e.toString().indexOf(t)}function nl2br(e){return e.replace(/\r*\n/g,"<br>")}function htmlspecialchars(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})}function strReplaceMany(e,t){for(var n in t)e=e.replace(new RegExp("{"+n+"}","g"),t[n]);return e}function NumberFormatHelper(){this.DEFAULT_NUMBER_OF_DECIMAL_POINTS=2,this.type=KATNISS_SETTINGS.number_format,this.numberOfDecimalPoints=this.DEFAULT_NUMBER_OF_DECIMAL_POINTS}function KatnissApiMessages(e){this.messages=isArray(e)?e:isString(e)?[e]:[]}function KatnissApi(e){this.REQUEST_TYPE_POST="post",this.REQUEST_TYPE_GET="get",this.REQUEST_TYPE_PUT="put",this.REQUEST_TYPE_DELETE="delete",this.isWebApi=isSet(e)&&e===!0}function updateCsrfToken(e){KATNISS_REQUEST_TOKEN=e,$('input[type="hidden"][name="_token"]').val(e),startSessionTimeout()}function startSessionTimeout(){isSet(_sessionTimeout)&&clearTimeout(_sessionTimeout),_sessionTimeout=setTimeout(function(){if(KATNISS_USER!==!1&&KATNISS_USER_REQUIRED)x_modal_lock();else{var e=new KatnissApi((!0));e.get("user/csrf-token",null,function(e,t,n){e||updateCsrfToken(t.csrf_token)})}},KATNISS_SESSION_LIFETIME+1e3)}function openWindow(e,t,n,o){var i=[];for(var r in n)i.push(r+"="+n[r]);return window.open(e,t,i.join(","),o)}function quickForm(e,t,n){"undefined"==typeof n&&(n="post"),$form=$('<form action="'+e+'" method="'+n+'"></form>');for(var o in t)$form.append('<input type="hidden" name="'+o+'" value="'+t[o]+'">');return $form}!function(e){var t=!1;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=n,o}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}function t(n){function o(t,i,r){var a;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},o.defaults,r),"number"==typeof r.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*r.expires),r.expires=s}try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(u){}return i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}t||(a={});for(var p=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,l=0;l<p.length;l++){var m=p[l].split("="),f=m.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var d=m[0].replace(c,decodeURIComponent);if(f=n.read?n.read(f,d):n(f,d)||f.replace(c,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(u){}if(t===d){a=f;break}t||(a[d]=f)}catch(u){}}return a}}return o.set=o,o.get=function(e){return o.call(o,e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(t,n){o(t,"",e(n,{expires:-1}))},o.withConverter=t,o}return t(function(){})}),function(e){function t(e){return o?o[e]:(o=require("unicode/category/So"),i=["sign","cross","of","symbol","staff","hand","black","white"].map(function(e){return new RegExp(e,"gi")}),o[e])}function n(e,o){e=e.toString(),"string"==typeof o&&(o={replacement:o}),o=o||{},o.mode=o.mode||n.defaults.mode;for(var r,a=n.defaults.modes[o.mode],s=["replacement","multicharmap","charmap","remove","lower"],u=0,p=s.length;u<p;u++)r=s[u],o[r]=r in o?o[r]:a[r];"undefined"==typeof o.symbols&&(o.symbols=a.symbols);var c=[];for(var r in o.multicharmap)if(o.multicharmap.hasOwnProperty(r)){var l=r.length;c.indexOf(l)===-1&&c.push(l)}for(var m,f,d,h="",u=0,p=e.length;u<p;u++){if(d=e[u],!c.some(function(t){var n=e.substr(u,t);return!!o.multicharmap[n]&&(u+=t-1,d=o.multicharmap[n],!0)})&&(o.charmap[d]?(d=o.charmap[d],m=d.charCodeAt(0)):m=e.charCodeAt(u),o.symbols&&(f=t(m)))){d=f.name.toLowerCase();for(var y=0,S=i.length;y<S;y++)d=d.replace(i[y],"");d=d.replace(/^\s+|\s+$/g,"")}d=d.replace(/[^\w\s\-\.\_~]/g,""),o.remove&&(d=d.replace(o.remove,"")),h+=d}return h=h.replace(/^\s+|\s+$/g,""),h=h.replace(/[-\s]+/g,o.replacement),h=h.replace(o.replacement+"$",""),o.lower&&(h=h.toLowerCase()),h}var o,i;if(n.defaults={mode:"pretty"},n.multicharmap=n.defaults.multicharmap={"<3":"love","&&":"and","||":"or","w/":"with"},n.charmap=n.defaults.charmap={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"SS","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"I","Ķ":"K","Ļ":"L","Ņ":"N","Ū":"U","ė":"e","į":"i","ų":"u","Ė":"E","Į":"I","Ų":"U","ț":"t","Ț":"T","ţ":"t","Ţ":"T","ș":"s","Ș":"S","ă":"a","Ă":"A","Ạ":"A","Ả":"A","Ầ":"A","Ấ":"A","Ậ":"A","Ẩ":"A","Ẫ":"A","Ằ":"A","Ắ":"A","Ặ":"A","Ẳ":"A","Ẵ":"A","Ẹ":"E","Ẻ":"E","Ẽ":"E","Ề":"E","Ế":"E","Ệ":"E","Ể":"E","Ễ":"E","Ị":"I","Ỉ":"I","Ĩ":"I","Ọ":"O","Ỏ":"O","Ồ":"O","Ố":"O","Ộ":"O","Ổ":"O","Ỗ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ợ":"O","Ở":"O","Ỡ":"O","Ụ":"U","Ủ":"U","Ũ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ự":"U","Ử":"U","Ữ":"U","Ỳ":"Y","Ỵ":"Y","Ỷ":"Y","Ỹ":"Y","Đ":"D","ạ":"a","ả":"a","ầ":"a","ấ":"a","ậ":"a","ẩ":"a","ẫ":"a","ằ":"a","ắ":"a","ặ":"a","ẳ":"a","ẵ":"a","ẹ":"e","ẻ":"e","ẽ":"e","ề":"e","ế":"e","ệ":"e","ể":"e","ễ":"e","ị":"i","ỉ":"i","ĩ":"i","ọ":"o","ỏ":"o","ồ":"o","ố":"o","ộ":"o","ổ":"o","ỗ":"o","ơ":"o","ờ":"o","ớ":"o","ợ":"o","ở":"o","ỡ":"o","ụ":"u","ủ":"u","ũ":"u","ư":"u","ừ":"u","ứ":"u","ự":"u","ử":"u","ữ":"u","ỳ":"y","ỵ":"y","ỷ":"y","ỹ":"y","đ":"d","€":"euro","₢":"cruzeiro","₣":"french franc","£":"pound","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","¢":"cent","¥":"yen","元":"yuan","円":"yen","﷼":"rial","₠":"ecu","¤":"currency","฿":"baht",$:"dollar","₹":"indian rupee","©":"(c)","œ":"oe","Œ":"OE","∑":"sum","®":"(r)","†":"+","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"tm","℠":"sm","…":"...","˚":"o","º":"o","ª":"a","•":"*","∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less",">":"greater"},n.defaults.modes={rfc3986:{replacement:"-",symbols:!0,remove:null,lower:!0,charmap:n.defaults.charmap,multicharmap:n.defaults.multicharmap},pretty:{replacement:"-",symbols:!0,remove:/[.]/g,lower:!1,charmap:n.defaults.charmap,multicharmap:n.defaults.multicharmap}},"undefined"!=typeof define&&define.amd){for(var r in n.defaults.modes)n.defaults.modes.hasOwnProperty(r)&&(n.defaults.modes[r].symbols=!1);define([],function(){return n})}else if("undefined"!=typeof module&&module.exports)t(),module.exports=n;else{for(var r in n.defaults.modes)n.defaults.modes.hasOwnProperty(r)&&(n.defaults.modes[r].symbols=!1);e.slug=n}}(this),$.fn.extend({registerSlugTo:function(e){return this.on("keyup",function(){var t=slug($(this).val(),{lower:!0});e.each(function(){var e=$(this);e.is("span")?e.text(t):e.val(t)})})},registerSlug:function(e){var t=this;return"undefined"!=typeof e&&t.on("keyup",function(){e.each(function(){var e=$(this);e.is("span")?e.text(t.val()):e.val(t.val())})}),t.on("keydown",function(e){if(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)return!1;var t=e.keyCode;return t>=65&&t<=90||t>=48&&t<=57||t>=35&&t<=40||t>=96&&t<=105||[189,8,9,13,46].indexOf(t)!=-1})}}),NumberFormatHelper.prototype.modeInt=function(e){this.mode(0)},NumberFormatHelper.prototype.modeNormal=function(e){this.mode(this.DEFAULT_NUMBER_OF_DECIMAL_POINTS)},NumberFormatHelper.prototype.mode=function(e){this.numberOfDecimalPoints=e},NumberFormatHelper.prototype.format=function(e){switch(e=parseFloat(e),this.type){case"point_comma":return this.formatPointComma(e);case"point_space":return this.formatPointSpace(e);case"comma_point":return this.formatCommaPoint(e);case"comma_space":return this.formatCommaSpace(e);default:return e}},NumberFormatHelper.prototype.formatPointComma=function(e){return e.toFixed(this.numberOfDecimalPoints).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")},NumberFormatHelper.prototype.formatPointSpace=function(e){return e.toFixed(this.numberOfDecimalPoints).replace(/(\d)(?=(\d{3})+\.)/g,"$1 ")},NumberFormatHelper.prototype.formatCommaPoint=function(e){return e=this.formatPointSpace(e),e.replace(".",",").replace(" ",".")},NumberFormatHelper.prototype.formatCommaSpace=function(e){return e=this.formatPointSpace(e),e.replace(".",",")},KatnissApiMessages.prototype.hasAny=function(){return this.messages.length>0},KatnissApiMessages.prototype.all=function(){return this.messages},KatnissApiMessages.prototype.first=function(){return this.hasAny()?this.messages[0]:""},KatnissApi.prototype.switchToAppApi=function(){this.isWebApi=!1},KatnissApi.prototype.switchToWebApi=function(){this.isWebApi=!0},KatnissApi.prototype.buildUrl=function(e){var t=this.isWebApi?KATNISS_WEB_API_URL:KATNISS_API_URL;return beginsWith(e,t)?e:t+"/"+e},KatnissApi.prototype.buildParams=function(e){return isUnset(e)&&(e={}),this.isWebApi?(isObject(e,"FormData")?e.append("_token",KATNISS_REQUEST_TOKEN):e._token=KATNISS_REQUEST_TOKEN,e):(isObject(e,"FormData")?(e.append("_app",JSON.stringify(KATNISS_APP)),e.append("_settings",JSON.stringify(KATNISS_SETTINGS))):(e._app=KATNISS_APP,e._settings=KATNISS_SETTINGS),e)},KatnissApi.prototype.buildOptions=function(e,t,n){return isSet(n)||(n={}),n.type=e,n.data=this.buildParams(t),isSet(n.dataType)||(n.dataType="json"),isObject(t,"FormData")&&(n.processData=!1,n.contentType=!1),n},KatnissApi.prototype.beforeRequest=function(){this.isWebApi&&startSessionTimeout()},KatnissApi.prototype.get=function(e,t,n,o,i){this.beforeRequest(),this.promise($.get(this.buildUrl(e),this.buildParams(t)),n,o,i)},KatnissApi.prototype.post=function(e,t,n,o,i){this.beforeRequest(),this.promise($.post(this.buildUrl(e),this.buildParams(t)),n,o,i)},KatnissApi.prototype.put=function(e,t,n,o,i){t._method="put",this.post(e,t,n,o,i)},KatnissApi.prototype["delete"]=function(e,t,n,o,i){t._method="delete",this.post(e,t,n,o,i)},KatnissApi.prototype.request=function(e,t,n,o,i,r,a){this.beforeRequest(),this.promise($.ajax(this.buildUrl(e),this.buildOptions(t,n,o)),i,r,a)},KatnissApi.prototype.promise=function(e,t,n,o){var i=this;e.done(function(e){isSet(t)&&t.call(i,i.isFailed(e),i.data(e),i.messages(e))}).fail(function(e,t,o){isSet(n)&&n.call(i,t,o)}).always(function(){isSet(o)&&o.call(i)})},KatnissApi.prototype.isFailed=function(e){return isSet(e._success)&&1!=e._success},KatnissApi.prototype.data=function(e){return isSet(e._data)?e._data:null},KatnissApi.prototype.messages=function(e){return new KatnissApiMessages(e._messages)};var _sessionTimeout=null;startSessionTimeout(),$(function(){$(document).on("click",".go-url",function(e){e.preventDefault();var t=$(this).attr("data-url");t&&(window.location.href=t)}).on("click",".open-window",function(e){e.preventDefault();var t=$(this),n=$.extend(t.data()),o="",i="",r=!0,a=null;n.url?(o=n.url,delete n.url):t.is("a")?o=t.attr("href"):t.is("img")&&(o=t.attr("src")),n.name&&(i=n.name,delete n.name),n.replace&&(r=n.replace,delete n.replace),n.callback&&(a=n.callback,delete n.callback);var s=openWindow(o,i,n,r);return a&&"string"==typeof a&&window[a](this,s),!1}),$(".unsigned-integer-input").on("keydown",function(e){return e.which>=48&&e.which<=57||e.which>=96&&e.which<=105||[8,9,13,35,36,37,39,46,144].indexOf(e.which)!=-1}),$(".pop-hover").popover({trigger:"manual",html:!0,animation:!1}).on("mouseenter",function(){var e=this;$(this).popover("show"),$(".popover").on("mouseleave",function(){$(e).popover("hide")})}).on("mouseleave",function(){var e=this;setTimeout(function(){$(".popover:hover").length||$(e).popover("hide")},300)})});